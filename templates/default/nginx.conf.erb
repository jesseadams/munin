# This file was generated by Chef for <%= node['fqdn'] %>
# Do NOT modify this file by hand!

server {
  listen <%= node['munin']['web_server_port'] %>;
  server_name munin <%= node['munin']['public_domain'] %> <%= node['fqdn'] %>;
  access_log <%= File.join(node['nginx']['log_dir'], 'nginx_access.log') %>;
  error_log <%= File.join(node['nginx']['log_dir'], 'nginx_error.log') %>;

  location /munin {
    root <%= node['munin']['docroot'] %>;
  }

  location / {
    auth_basic "Munin Server";
    auth_basic_user_file <%= File.join(node['munin']['basedir'], 'htpasswd.users') %>;
    root <%= node['munin']['docroot'] %>;
  }
}
